webpackJsonp([2],{"5zde":function(t,e,o){o("zQR9"),o("qyJz"),t.exports=o("FeBl").Array.from},"9jhk":function(t,e){},Gu7T:function(t,e,o){"use strict";e.__esModule=!0;var n,r=o("c/Tr"),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return(0,a.default)(t)}},QH9e:function(t,e){},VCtf:function(t,e,o){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span")])}]};var r=o("VU/8")(null,n,!1,function(t){o("9jhk")},"data-v-595be876",null);e.a=r.exports},"c/Tr":function(t,e,o){t.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(t,e,o){"use strict";var n=o("evD5"),r=o("X8DO");t.exports=function(t,e,o){e in t?n.f(t,e,r(0,o)):t[e]=o}},qyJz:function(t,e,o){"use strict";var n=o("+ZMJ"),r=o("kM2E"),a=o("sB3e"),s=o("msXi"),i=o("Mhyx"),c=o("QRG4"),l=o("fBQ2"),u=o("3fs2");r(r.S+r.F*!o("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,o,r,f,v=a(t),d="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,k=void 0!==p,m=0,_=u(v);if(k&&(p=n(p,h>2?arguments[2]:void 0,2)),void 0==_||d==Array&&i(_))for(o=new d(e=c(v.length));e>m;m++)l(o,m,k?p(v[m],m):v[m]);else for(f=_.call(v),o=new d;!(r=f.next()).done;m++)l(o,m,k?s(f,p,[r.value,m],!0):r.value);return o.length=m,o}})},tcnj:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Xxa5"),r=o.n(n),a=o("Gu7T"),s=o.n(a),i=o("exGp"),c=o.n(i),l=o("GAMq"),u=o("gyMJ"),f=o("VCtf"),v=(l.a,f.a,{name:"list",components:{VHeader:l.a,Loading:f.a},created:function(){this.getData()},data:function(){return{allBooks:[],offset:0,hasMore:!0,loading:!0,isLoading:!1}},methods:{scrollLoad:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.$refs.scroll;e.scrollTop+e.clientHeight+40>e.scrollHeight&&t.getData()},13)},loadMore:function(){this.hasMore||this.$vux.toast.show("我是有底线的"),this.getData()},getData:function(){var t=this;return c()(r.a.mark(function e(){var o,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasMore||t.isLoading){e.next=12;break}return t.isLoading=!0,e.next=4,Object(u.d)(t.offset);case 4:o=e.sent,n=o.hasMore,a=o.books,t.allBooks=[].concat(s()(t.allBooks),s()(a)),t.hasMore=n,t.isLoading=!1,t.offset=t.allBooks.length,t.loading=!1;case 12:case"end":return e.stop()}},e,t)}))()},remove:function(t){var e=this;return c()(r.a.mark(function o(){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(u.e)(t);case 2:e.allBooks=e.allBooks.filter(function(e){return e.bookId!==t});case 3:case"end":return o.stop()}},o,e)}))()}},mounted:function(){var t=this,e=this.$refs.scroll,o=e.offsetTop,n=0;e.addEventListener("touchstart",function(r){if(0===e.scrollTop&&e.offsetTop===o){var a=r.touches[0].pageY,s=e.addEventListener("touchmove",function(t){var r=t.touches[0].pageY;(n=r-a)>0?n<=40?e.style.top=n+o+"px":(n=40,e.style.top=o+40+"px"):(e.removeEventListener("touchmove",s),e.removeEventListener("touchend",i))}),i=function r(a){clearInterval(t.timer),t.timer=setInterval(function(){if(n<=0)return clearInterval(t.timer),n=0,e.style.top=o+"px",e.removeEventListener("touchmove",s),e.removeEventListener("touchend",r),console.log("获取数据"),t.allBooks=[],t.offset=0,void t.getData();n--,e.style.top=o+n+"px"},10)};e.addEventListener("touchmove",s),e.addEventListener("touchend",i)}},!1)}}),d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list"},[o("v-header",{attrs:{back:!0}},[t._v("列表")]),t._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:t.scrollLoad}},[t.loading?o("loading"):[o("ul",t._l(t.allBooks,function(e,n){return o("router-link",{key:n,attrs:{to:{name:"detail",params:{id:e.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bookCover,expression:"book.bookCover"}],attrs:{alt:"xxxkkkkkkkk"}}),t._v(" "),o("div",[o("h4",[t._v(t._s(e.bookName))]),t._v(" "),o("p",[t._v(t._s(e.bookInfo))]),t._v(" "),o("b",[t._v(t._s(e.bookPrice))]),t._v(" "),o("button",{on:{click:function(o){o.stopPropagation(),t.remove(e.bookId)}}},[t._v("删除")])])])}))],t._v(" "),o("div",{staticClass:"more",on:{click:function(e){return e.stopPropagation(),t.loadMore(e)}}},[t._v("加载更多")])],2)],1)},staticRenderFns:[]};var h=o("VU/8")(v,d,!1,function(t){o("QH9e")},"data-v-1be0d703",null);e.default=h.exports}});
//# sourceMappingURL=2.054e517fa1ddbcc7ff15.js.map